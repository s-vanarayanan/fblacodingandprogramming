<!DOCTYPE html>
<html>
  <head>
    <title>See Prizes</title>
    <style>
      /* Style for the navigation bar */
      .navbar {
        overflow: hidden;
        background-color: #333;
      }
      .navbar a {
        float: left;
        display: block;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
      }
      .navbar a:hover {
        background-color: #ddd;
        color: black;
      }
      /* Style for the overall header */
      .header {
        background-color: #f1f1f1;
        text-align: center;
        padding: 20px;
      }
    </style>
  </head>
  <body>
    <!-- Overall header -->
    <div class="header">
      <h1>See Prizes</h1>
    </div>

    <!-- Navigation bar -->
    <div class="navbar">
      <a href="StudentInvolvementTracker.html">Home</a>
      <a href="add_students.html">Add Students</a>
      <a href="attend_activities.html">Attend Activities</a>
      <a href="get_points.html">Get Points</a>
      <a href="see_prizes.html">See Prizes</a>
      <a href="generate_report.html">Generate Report</a>
    </div>
    <div style="padding:20px">
      <h3>Choose Winners Here!</h3>
      <p>Click the buttons to both get a random winner from each grade, as well as the top points scorer overall.</p>
    </div>

    <!DOCTYPE html>
<html>
  <body>
    <form>
      <!-- Form to select a grade -->
      <label for="grade">Select a grade:</label>
      <select id="grade" name="grade">
        <option value="9">Grade 9</option>
        <option value="10">Grade 10</option>
        <option value="11">Grade 11</option>
        <option value="12">Grade 12</option>
      </select>
      <br><br>
      <button type="button" onclick="pickWinner()">Pick a winner</button>
      <br><br>
      <button type="button" onclick="pickOverallWinner()">Get Overall Winner</button>
    </form>
    <!-- Saves spaces to display output -->
    <div id="winner"></div>
    <div id="prize"></div>
    <div id="overall-winner"></div>
    <div id="prize1"></div>
    <script>
      var winners = [];
      //code to choose a random rpize for the winner and display
      function generatePrize() {
        const prizes = ["personal pizza party", "school merch hoodie", "10 extra credit points"];
        const prizeIndex = Math.floor(Math.random() * prizes.length);
        const prizeText = prizes[prizeIndex];
        document.getElementById("prize").innerHTML = "The prize they get is " + prizeText + "!";
      }
      function generatePrize1() {
        const prizes = ["personal pizza party", "school merch hoodie", "10 extra credit points"];
        const prizeIndex = Math.floor(Math.random() * prizes.length);
        const prizeText = prizes[prizeIndex];
        document.getElementById("prize1").innerHTML = "The prize they get is " + prizeText + "!";
      }

      //picks a random winner based on grade
      function pickWinner() {
        // Get the selected grade
        var grade = document.getElementById("grade").value;
        
        // Get all the students in the selected grade
        var students = getStudentsByGrade(grade);
        
        // Pick a random winner from the students
        var winner = students[Math.floor(Math.random() * students.length)];
        
        // Add the winner to the list of winners
        winners.push(winner);
        
        // Display the winner
        document.getElementById("winner").innerHTML = "The winner is " + winner + "!";
        generatePrize()
      }
      
      function pickOverallWinner() {
        // Make a copy of the list of winners
       var eligibleWinners = winners.slice();
  
        // Remove the current winner from the list of eligible winners
         var currentWinner = document.getElementById("winner").innerHTML.slice(16, -1);
        var index = eligibleWinners.indexOf(currentWinner);
        if (index !== -1) {
         eligibleWinners.splice(index, 1);
        }
  
          // Pick a random overall winner from the list of eligible winners
          var overallWinner = eligibleWinners[Math.floor(Math.random() * eligibleWinners.length)];
          
          // Assign a random number of points to the overall winner
          var points = 20;
          
          // Display the overall winner and points
          document.getElementById("overall-winner").innerHTML = "The overall winner is Vasudha Narayanan, with " + points + " points!";
          generatePrize1()
      }

      
      //code that gets which students are in a specific grade in order to pick them for random prize winner
      function getStudentsByGrade(grade) {
        var students = [
            "Divij Aswinkumar, 9",
            "Rishi Dilip, 10",
            "Vasudha Narayanan, 11",
            "John Doe, 12",
            "Jane Doe, 11",
        ];

        switch (grade) {
            case "9":
                return students.filter(student => student.includes("9")).map(student => student.split(",")[0]);
            case "10":
                return students.filter(student => student.includes("10")).map(student => student.split(",")[0]);
            case "11":
                return students.filter(student => student.includes("11")).map(student => student.split(",")[0]);
            case "12":
                return students.filter(student => student.includes("12")).map(student => student.split(",")[0]);
            default:
            return [];
        }
      }
    </script>
  </body>
</html>

  </body>
</html>
